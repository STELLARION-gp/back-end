<!DOCTYPE html>
<html>

<head>
    <title>Firebase Auth Test</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>

<body>
    <h1>Firebase Authentication Test</h1>

    <div id="auth-section">
        <h3>Sign In</h3>
        <input type="email" id="email" placeholder="Email" />
        <input type="password" id="password" placeholder="Password" />
        <button onclick="signIn()">Sign In</button>
        <button onclick="signUp()">Sign Up</button>
    </div>

    <div id="token-section" style="display: none;">
        <h3>Firebase ID Token:</h3>
        <textarea id="token-display" readonly style="width: 100%; height: 200px;"></textarea>
        <button onclick="copyToken()">Copy Token</button>
        <button onclick="signOut()">Sign Out</button>
    </div>

    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "stellarion-b76d6.firebaseapp.com",
            projectId: "stellarion-b76d6",
            // Add other config if needed
        };

        firebase.initializeApp(firebaseConfig);

        // Monitor auth state
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                document.getElementById('auth-section').style.display = 'none';
                document.getElementById('token-section').style.display = 'block';

                // Get ID token
                user.getIdToken().then((token) => {
                    document.getElementById('token-display').value = token;
                    console.log('Firebase ID Token:', token);
                });
            } else {
                document.getElementById('auth-section').style.display = 'block';
                document.getElementById('token-section').style.display = 'none';
            }
        });

        function signIn() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log('Signed in successfully');
                })
                .catch((error) => {
                    alert('Error: ' + error.message);
                });
        }

        function signUp() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    console.log('Account created successfully');
                })
                .catch((error) => {
                    alert('Error: ' + error.message);
                });
        }

        function copyToken() {
            const token = document.getElementById('token-display').value;
            navigator.clipboard.writeText(token).then(() => {
                alert('Token copied to clipboard!');
            });
        }

        function signOut() {
            firebase.auth().signOut();
        }
    </script>
</body>

</html>